[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:09.006 | General Service|:: CompanyIndex:0 SpName: spADM_GetClientUserDetails2C 
 'admin'
 ,1
 ,0
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:09.350 | General Service|:: CompanyIndex:0 SpName: spADM_UserLoginCheck 
 2
 ,'admin'
 ,0
 ,'192.168.1.99'
 ,'192.168.1.99'
 ,''
 ,'Web'
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:33.606 | General Service|:: CompanyIndex:11 SpName: spADM_GetClientUserDetails 
 'admin'
 ,1
 ,'26.2.9'
 ,0
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:33.903 | General Service|:: CompanyIndex:0 SpName: spADM_UserLoginCheck 
 2
 ,'admin'
 ,11
 ,'192.168.1.99'
 ,'192.168.1.99'
 ,''
 ,'Web'
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:34.028 | General Service|:: CompanyIndex:0 SpName: spADM_Login 
 1
 ,''
 ,''
 ,''
 ,''
 ,''
 ,11
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:34.043 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select Value from ADM_GlobalPreferences with (nolock) where name =''EnableReLogin'''
 ,1
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:34.043 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFkbWluLDEsMTEsMSIsIm5iZiI6MTc1NDY1OTA1MywiZXhwIjoxNzU0Njg3ODUzLCJpYXQiOjE3NTQ2NTkwNTN9.NEaOluSzdvHcQaj9fTkfBoIvlsvb3WmRUCpk3IAzgsY'''
 ,1
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:34.122 | General Service|:: CompanyIndex:0 SpName: spADM_Login 
 4
 ,''
 ,''
 ,''
 ,'declare @Cnt int,@ExpiredGUID nvarchar(50),@AllowSession int,@GUID nvarchar(50),@CurrDate float,@UserID INT,@Instances INT,@InstancesExists INT,@LCDBIndex int
set @CurrDate= convert(float,dateadd(minute,-21,getdate()))
set @AllowSession=0
set @GUID=''c373e8ee-c8b9-4ee8-9304-6785eb58bea3''
set @LCDBIndex=0
select top 1 @UserID=UserID,@Instances=InstanceCount from ADM_Users with(nolock) where UserName=''admin''
if exists(select [GUID] from ADM_Login with(nolock) where [GUID]=@GUID)
begin
	update ADM_Login 
	set LastAccessTime=convert(float,getdate()),UserID=@UserID
	where [GUID]=@GUID
    set @AllowSession=1
end
else
begin
	select @Cnt=count(*) from ADM_Login with(nolock) where LCDBIndex=@LCDBIndex and [GUID]!=''ACCESSRIGHTS'' and AP =''WEB''
    if(@Cnt<100)
		set @AllowSession=1
	else
	begin
		select top 1 @ExpiredGUID=[GUID] from ADM_Login with(nolock)
		where [GUID]!=''ACCESSRIGHTS'' and LCDBIndex=@LCDBIndex and LastAccessTime<@CurrDate  and AP =''WEB''
        order by LastAccessTime asc
		if @ExpiredGUID is not null
		begin
			delete from ADM_Login where [GUID]=@ExpiredGUID
			set @AllowSession=1
		end
	end
	if @AllowSession=1
	begin
        select @InstancesExists=COUNT(*) from ADM_Login with(nolock)
		where [GUID]!=''ACCESSRIGHTS'' and LCDBIndex=@LCDBIndex and LastAccessTime>=@CurrDate and UserID=@UserID and AP =''WEB''
		if(@Instances!=0 and @Instances<=@InstancesExists)
			set @AllowSession=2
		else
		    INSERT INTO ADM_Login([GUID],[SysName],IPAddress,[Status],LoginTime,LastAccessTime,AccessRights,UserID,DBIndex,LCDBIndex,AP)
		    VALUES(@GUID,''WEB'',''192.168.1.99'',1,convert(float,getdate()),convert(float,getdate()),null,@UserID,11,@LCDBIndex, ''WEB'')
	end
end

select @AllowSession AllowSession,@Instances Instances,@InstancesExists InstancesExists
'
 ,''
 ,0
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:34.122 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFkbWluLDEsMTEsMSIsIm5iZiI6MTc1NDY1OTA1MywiZXhwIjoxNzU0Njg3ODUzLCJpYXQiOjE3NTQ2NTkwNTN9.NEaOluSzdvHcQaj9fTkfBoIvlsvb3WmRUCpk3IAzgsY'''
 ,1
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:34.168 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'Select Name,Value From ADM_GlobalPreferences WITH(NOLOCK) WHERE Name IN(''EnableEmail'',''SmtpAuthenticateUser'',''SmtpAuthenticatePassword'',''SmtpHost'',''SmtpPort'',''SmtpUseSSL'',''SmtpDisplayName'')'
 ,1
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:47:45.393 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFkbWluLDEsMTEsMSIsIm5iZiI6MTc1NDY1OTA1MywiZXhwIjoxNzU0Njg3ODUzLCJpYXQiOjE3NTQ2NTkwNTN9.NEaOluSzdvHcQaj9fTkfBoIvlsvb3WmRUCpk3IAzgsY'''
 ,1
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:47:54.841 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:47:55.154 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:47:55.169 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:47:55.169 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:47:55.169 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:47:55.169 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:48:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:48:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:48:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:48:51.054 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:48:51.054 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:48:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.505 | General Service|:: CompanyIndex:11 SpName: spADM_GetClientUserDetails 
 'admin'
 ,1
 ,'26.2.9'
 ,0
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.583 | General Service|:: CompanyIndex:0 SpName: spADM_UserLoginCheck 
 2
 ,'admin'
 ,11
 ,'192.168.1.99'
 ,'192.168.1.99'
 ,''
 ,'Web'
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.599 | General Service|:: CompanyIndex:0 SpName: spADM_Login 
 1
 ,''
 ,''
 ,''
 ,''
 ,''
 ,11
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.615 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select Value from ADM_GlobalPreferences with (nolock) where name =''EnableReLogin'''
 ,1
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.615 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFkbWluLDEsMTEsMSIsIm5iZiI6MTc1NDY1OTE2MCwiZXhwIjoxNzU0Njg3OTYwLCJpYXQiOjE3NTQ2NTkxNjB9.OCdt9HXDk8e4-8aYWhCVY8Zezls6p7QaPAg67nUM7r4'''
 ,1
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.646 | General Service|:: CompanyIndex:0 SpName: spADM_Login 
 6
 ,'8e7ada2f-b4e8-417e-b980-9f59cf0c3d20'
 ,''
 ,''
 ,''
 ,''
 ,0
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.646 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFkbWluLDEsMTEsMSIsIm5iZiI6MTc1NDY1OTE2MCwiZXhwIjoxNzU0Njg3OTYwLCJpYXQiOjE3NTQ2NTkxNjB9.OCdt9HXDk8e4-8aYWhCVY8Zezls6p7QaPAg67nUM7r4'''
 ,1
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.693 | General Service|:: CompanyIndex:0 SpName: spADM_Login 
 4
 ,''
 ,''
 ,''
 ,'declare @Cnt int,@ExpiredGUID nvarchar(50),@AllowSession int,@GUID nvarchar(50),@CurrDate float,@UserID INT,@Instances INT,@InstancesExists INT,@LCDBIndex int
set @CurrDate= convert(float,dateadd(minute,-21,getdate()))
set @AllowSession=0
set @GUID=''8e7ada2f-b4e8-417e-b980-9f59cf0c3d20''
set @LCDBIndex=0
select top 1 @UserID=UserID,@Instances=InstanceCount from ADM_Users with(nolock) where UserName=''admin''
if exists(select [GUID] from ADM_Login with(nolock) where [GUID]=@GUID)
begin
	update ADM_Login 
	set LastAccessTime=convert(float,getdate()),UserID=@UserID
	where [GUID]=@GUID
    set @AllowSession=1
end
else
begin
	select @Cnt=count(*) from ADM_Login with(nolock) where LCDBIndex=@LCDBIndex and [GUID]!=''ACCESSRIGHTS'' and AP =''WEB''
    if(@Cnt<100)
		set @AllowSession=1
	else
	begin
		select top 1 @ExpiredGUID=[GUID] from ADM_Login with(nolock)
		where [GUID]!=''ACCESSRIGHTS'' and LCDBIndex=@LCDBIndex and LastAccessTime<@CurrDate  and AP =''WEB''
        order by LastAccessTime asc
		if @ExpiredGUID is not null
		begin
			delete from ADM_Login where [GUID]=@ExpiredGUID
			set @AllowSession=1
		end
	end
	if @AllowSession=1
	begin
        select @InstancesExists=COUNT(*) from ADM_Login with(nolock)
		where [GUID]!=''ACCESSRIGHTS'' and LCDBIndex=@LCDBIndex and LastAccessTime>=@CurrDate and UserID=@UserID and AP =''WEB''
		if(@Instances!=0 and @Instances<=@InstancesExists)
			set @AllowSession=2
		else
		    INSERT INTO ADM_Login([GUID],[SysName],IPAddress,[Status],LoginTime,LastAccessTime,AccessRights,UserID,DBIndex,LCDBIndex,AP)
		    VALUES(@GUID,''WEB'',''192.168.1.99'',1,convert(float,getdate()),convert(float,getdate()),null,@UserID,11,@LCDBIndex, ''WEB'')
	end
end

select @AllowSession AllowSession,@Instances Instances,@InstancesExists InstancesExists
'
 ,''
 ,0
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.693 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFkbWluLDEsMTEsMSIsIm5iZiI6MTc1NDY1OTE2MCwiZXhwIjoxNzU0Njg3OTYwLCJpYXQiOjE3NTQ2NTkxNjB9.OCdt9HXDk8e4-8aYWhCVY8Zezls6p7QaPAg67nUM7r4'''
 ,1
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:20.708 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'Select Name,Value From ADM_GlobalPreferences WITH(NOLOCK) WHERE Name IN(''EnableEmail'',''SmtpAuthenticateUser'',''SmtpAuthenticatePassword'',''SmtpHost'',''SmtpPort'',''SmtpUseSSL'',''SmtpDisplayName'')'
 ,1
 ,1
[System: 192.168.1.99] DEBUG | 08-08-2025 18:49:32.319 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFkbWluLDEsMTEsMSIsIm5iZiI6MTc1NDY1OTE2MCwiZXhwIjoxNzU0Njg3OTYwLCJpYXQiOjE3NTQ2NTkxNjB9.OCdt9HXDk8e4-8aYWhCVY8Zezls6p7QaPAg67nUM7r4'''
 ,1
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:49:51.041 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:49:51.041 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:49:51.041 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:49:51.041 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:49:51.041 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:49:51.041 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:50:51.051 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:50:51.051 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:50:51.051 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:50:51.051 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:50:51.051 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:50:51.051 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:51:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:51:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:51:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:51:51.054 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:51:51.054 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:51:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:52:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:52:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:52:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:52:51.054 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:52:51.054 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:52:51.054 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:53:51.061 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:53:51.061 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:53:51.061 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:53:51.061 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:53:51.061 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:53:51.061 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:54:51.062 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:54:51.062 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:54:51.062 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:54:51.062 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:54:51.062 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:54:51.062 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:55:51.047 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:55:51.062 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:55:51.062 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:55:51.062 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:55:51.062 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:55:51.062 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:56:51.047 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:56:51.063 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:56:51.063 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:56:51.063 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:56:51.063 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:56:51.063 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:57:51.075 | General Service|:: CompanyIndex:0 SpName: spADM_Login 
 4
 ,''
 ,''
 ,''
 ,'declare @AllowSession bit,@GUID nvarchar(50)
set @AllowSession=0
set @GUID=''491b6182-2c50-40f1-a990-7e054aa28437''
if exists(select [GUID] from ADM_Login with(nolock) where [GUID]=@GUID)
begin
    update ADM_Login  set LastAccessTime=convert(float,getdate()) where [GUID]=@GUID
    set @AllowSession=1
end
select @AllowSession AllowSession
'
 ,''
 ,0
[System: 192.168.1.56] DEBUG | 08-08-2025 18:57:51.075 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'declare @UserID int,@RoleID int,@UserName NVARCHAR(100),@where nvarchar(max),@query nvarchar(max)
set @UserID=10002
set @RoleID=503-- Employee:-1
SELECT @UserName=UserName From ADM_Users WITH(NOLOCK) WHERE UserID=@UserID
exec [fnGet_GetAssignedDims] @UserID,@RoleID,@where output
 create table #TblUsrWF(WID int,LevelID int,Type int,CtWef float,LvWef int)
EXEC spRPT_GetReportData @Type=8,@Param1=@UserID,@strXML=null,@RoleID=@RoleID set @query=''  SELECT DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory,count(*) CNT
FROM (
 SELECT INV.CostCenterID
FROM INV_DocDetails INV with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on INV.INVDocDetailsid=d.INVDocDetailsid''	

set @query=@query+'' ,#TblUsrWF WF
WHERE WF.WID=INV.WorkflowID and (WF.LevelID>INV.WorkFlowLevel or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372)) and (INV.StatusID=371 or INV.StatusID=372 or INV.StatusID=441) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=372) or (WF.LevelID+1=INV.WorkFlowLevel and INV.StatusID=372) or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) ''+@where+''
GROUP BY INV.CostCenterID,INV.VoucherNo
UNION ALL
SELECT ACC.CostCenterID
FROM ACC_DocDetails ACC with(nolock)''
if(@where<>'''')
	set @query=@query+'' join com_docccdata d with(nolock) on ACC.ACCDocDetailsid=d.ACCDocDetailsid''	

set @query=@query+'',#TblUsrWF WF
WHERE ACC.LinkedAccDocDetailsID is null and ACC.InvDocDetailsID is null and WF.WID=ACC.WorkflowID and (WF.LevelID>ACC.WorkFlowLevel or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372)) and (ACC.StatusID=371 or ACC.StatusID=372 or ACC.StatusID=441) AND (WF.Type=1 or (ACC.WorkFlowLevel+1=WF.LevelID and ACC.StatusID!=372) or (WF.LevelID+1=ACC.WorkFlowLevel and ACC.StatusID=372) or (WF.CtWef is not null and ACC.WorkFlowLevel>=WF.LvWef
and ACC.CreatedDate+WF.CtWef<=convert(float,getdate())))''+@where+''
GROUP BY ACC.CostCenterID,ACC.VoucherNo  ) AS T
JOIN ADM_DocumentTypes DT with(nolock) ON T.CostCenterID=DT.CostCenterID
GROUP BY DT.CostCenterID,DT.DocumentName,DT.DocumentType,DT.IsInventory  
UNION ALL
SELECT DT.FeatureID CostCenterID,DT.Name DocumentName,-DT.FeatureID DocumentType,0 IsInventory,count(*) CNT
FROM (
SELECT INV.CostCenterID FROM REN_Contract INV WITH(NOLOCK),#TblUsrWF WF
WHERE  WF.WID=INV.WorkflowID and WF.LevelID>INV.WorkFlowLevel and (INV.StatusID=440 or INV.StatusID=470 or INV.StatusID=466) AND (WF.Type=1 or (INV.WorkFlowLevel+1=WF.LevelID and INV.StatusID!=470)  or (WF.CtWef is not null and INV.WorkFlowLevel>=WF.LvWef
 and INV.CreatedDate+WF.CtWef<=convert(float,getdate()))) AND INV.RefContractID=0 ) AS T
JOIN ADM_Features DT with(nolock) ON T.CostCenterID=DT.FeatureID
GROUP BY DT.FeatureID,DT.Name 
ORDER BY DocumentName''
exec(@query)

DROP TABLE #TblUsrWF
'
 ,10002
 ,1
[System: 192.168.1.56] DEBUG | 08-08-2025 18:57:51.090 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:57:51.090 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:57:51.090 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:57:51.090 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:57:51.090 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:57:51.090 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.56] DEBUG | 08-08-2025 18:57:51.090 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1
 message=Problem in processing your request, Please contact administrator.
[System: 192.168.1.56] INFO | 08-08-2025 18:57:51.090 | OnStartup: Logger Instance Created Successfully
[System: 192.168.1.56] INFO | 08-08-2025 18:57:51.090 | OnStartup: Application Starting...
[System: 192.168.1.56] ERROR | 08-08-2025 18:57:51.090 | General Service|:: CompanyIndex:162 SpName: spADM_GetDataSetParameters :
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFsbCBhY2Nlc3MsMTAwMDIsMTYyLDUwMyIsIm5iZiI6MTc1NDY0NzAyMiwiZXhwIjoxNzU0Njc1ODIyLCJpYXQiOjE3NTQ2NDcwMjJ9.NBI8bPGNH3WRnG18xdurVB53UwdEshgIdl-59JCRqxs'''
 ,1
 ,1|Invalid object name 'COM_TokenHistory'.
[System: 192.168.1.99] DEBUG | 08-08-2025 19:04:20.821 | General Service|:: CompanyIndex:0 SpName: spADM_Login 
 4
 ,''
 ,''
 ,''
 ,'declare @AllowSession bit,@GUID nvarchar(50)
set @AllowSession=0
set @GUID=''8e7ada2f-b4e8-417e-b980-9f59cf0c3d20''
if exists(select [GUID] from ADM_Login with(nolock) where [GUID]=@GUID)
begin
    update ADM_Login  set LastAccessTime=convert(float,getdate()) where [GUID]=@GUID
    set @AllowSession=1
end
select @AllowSession AllowSession
'
 ,''
 ,0
[System: 192.168.1.99] DEBUG | 08-08-2025 19:04:20.836 | General Service|:: CompanyIndex:11 SpName: spADM_GetDataSet 
 'select * from COM_TokenHistory WITH(NOLOCK) where JwtToken=''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6ImFkbWluLDEsMTEsMSIsIm5iZiI6MTc1NDY1OTE2MCwiZXhwIjoxNzU0Njg3OTYwLCJpYXQiOjE3NTQ2NTkxNjB9.OCdt9HXDk8e4-8aYWhCVY8Zezls6p7QaPAg67nUM7r4'''
 ,1
 ,1
